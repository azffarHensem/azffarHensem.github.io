<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barang yang kena Beli</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            background: linear-gradient(135deg, #EF99A6 50%, #F3BEC4 50%);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: background-color 0.4s ease;
            flex-direction: column;
            scroll-behavior: smooth;
        }

        .container {
            background: #F3BEC4;
            padding: 30px;
            border-radius: 30px;
            max-width: 250px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            max-height: 80vh;  /* Make the container scrollable */
            width: 100%;
            justify-content: flex-start;
            opacity: 0;
            animation: fadeIn 1s forwards;
            text-align: center;
            overflow-y: auto; /* Enable vertical scrolling */
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        h2, h3 {
            color: #2c3e50;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        /* Logo Container */
        .logo-container {
            width: 100%;
            background-color: #EF99A6;
            padding: 20px 10;
            margin-bottom: 10px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .logo-container img {
            max-width: 80%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        /* Center and align checkbox with quantity */
        .checkbox-group {
            display: flex;
          l  flex-direction: row;
            justify-content: flex-start;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
            padding: 8px 20;
        }

        .checkbox-group label {
            font-weight: 600;
            color: #34495e;
            font-size: 0.9rem;
            margin-right: 12px;
            flex: 1;
        }

        input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.1);
        }

        input[type="number"] {
            width: 60px;
            padding: 6px;
            margin-left: 8px;
            border-radius: 6px;
            border: 1px solid #dcdcdc;
            text-align: center;
            font-size: 0.9rem;
            transition: border 0.3s ease;
        }

        input[type="number"]:focus {
            border: 1px solid #3498db;
        }

        button {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(135deg, #F3BEC4, #FF6FA2);
            color: white;
            margin: 8px 5px;
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 0.2s;
        }

        button:hover {
            background: linear-gradient(135deg, #3498db, #2980b9);
            transform: scale(1.05);
        }

        button:disabled {
            background-color: #dcdcdc;
            color: #7f8c8d;
            cursor: not-allowed;
        }

        /* Make category groups scrollable */
        .category-group {
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.4s ease, transform 0.4s ease;
            max-height: 50vh; /* Allow scrolling within the category */
            overflow-y: auto; /* Scroll only in the category section */
            padding-right: 10px; /* Prevent scrollbar overlap */
        }

        .category-group.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .summary-box {

            background-color: #163C47;

            color: #ecf0f1;

            padding: 10px; /* Smaller padding */

            border-radius: 10px;

            font-family: monospace;

            white-space: pre-wrap;

            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);

            text-align: left;

            margin-top: 15px; /* Smaller margin */

            opacity: 0;

            animation: fadeIn 1s forwards;

            animation-delay: 0.3s;

        }

        /* Custom Item Section */
        #custom-items-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f2f2f2;
            border-radius: 10px;
        }

        .hidden {
            display: none;
        }
        
        /* Main Menu */
        #main-menu {
            align-items: center;
            max-height: 60vh; /* Adjust the height as needed * /* Enables vertical scrolling */
            padding-right: 10px; /* Prevent overlap of the scrollbar */
        }

        /* Footer */
        #footer {
            bottom: 0px; /* Adjust the distance from the bottom of the page */
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
            color: #000000;
            font-weight: 600;
            opacity: 0.8;
        }

        #footer p {
            margin: 0;
        }
    </style>
</head>
<body>
    <!-- Logo Container -->
    <div class="logo-container">
        <img src="https://raw.githubusercontent.com/azffarHensem/azffarHensem.github.io/refs/heads/main/png1.jpg" alt="Logo">
    </div>

    <div class="container">
        <!-- Main Menu -->
        <div id="main-menu">
            <button onclick="showCategory('A')" id="categoryA-btn">Breakfast ü•ñ/ Fruitüçé / Veg. ü•ï/ Meatü•©</button>
            <button onclick="showCategory('B')" id="categoryB-btn">Frozenüßä / Ice Creamüç¶ / Riceüçö</button>
            <button onclick="showCategory('C')" id="categoryC-btn">Cooking üç≤/ Cleaning ü™£/ Householdüßª / PadüïØÔ∏è</button>
            <button onclick="showCategory('D')" id="categoryD-btn">Cotton BudüëÇ / Kid Syampooüß¥</button>
            <button onclick="showCategory('E')" id="categoryE-btn">Milkü•õ / Cornflakes ü•£/ Cookiesüç™ / GarbageüóëÔ∏è</button>
            <button onclick="showCategory('F')" id="categoryF-btn">Toothpasteü™• / Syampoo üß¥/ Soapüßº</button>
            
        </div>

        <!-- Category Forms -->
        <div id="categories"></div>

        <!-- Custom Item Section -->
        <div id="custom-items-section" style="display:none;">
            <h3>Add Custom Item</h3>
            <input type="text" id="custom-item-name" placeholder="Item Name">
            <input type="number" id="custom-item-quantity" min="1" max="25" placeholder="Quantity">
            <button onclick="submitCustomItem()">Submit</button>
        </div>

        <!-- Summary Box -->


    <!-- Footer -->
    <div id="footer">
    	<button onclick="showCustomItemSection()">Add Custom Item‚ûï</button>
    	        <div id="summary-box" class="summary-box">No items selected.</div>
    	            <button onclick="downloadSummary()">Download File üîó</button>
                            <button onclick="sendWhatsApp()">Send to WhatsApp üì≤</button>
            <button onclick="clearCookies()">Delete Dataüç™</button>
        <p>Created by Azffar Ar Rayyanü•ï</p>
    </div>

<script>
    const categories = ['A', 'B', 'C', 'D', 'E', 'F'];
    const items = {
        A: ['Roti Gardenia Wholemeal', 'Roti Gardenia Biasa', 'Roti Gardenia Kecil Coklat/Vanilla/Jagung', 'Kek Pisang', 'Buah Naga', 'Tembikai', 'Bawang Besar', 'Halia', 'Kentang', 'Karet', 'Cili Hidup', 'Terung', 'Brokoli', 'Ikan Selar', 'Ikan Tenggiri', 'Ayam Wholeleg', 'Lemon', 'Epal Pink', 'Avocado'],
        B: ['Cheesdale', 'Butter', 'Whipping Cream', 'Cream Cheese', 'Sosej Frankfurter', 'Frozen Seafood', 'Frozen Fish Ball', 'Frozen Chicken Ball', 'Frozen Fish', 'Frozen Sotong', 'Frozen Udang', 'Ice Cream', 'Beras Biasa', 'Beras Basmathi', 'Nugget Tempura', 'Santan Kara', 'Cendawan Butang'],
        C: ['Minyak', 'Gula', 'Sardin', 'Kicap', 'Sos', 'Sabun Basuh Pinggan Joy', 'Sabun Basuh Baju', 'Pelembut Daia'],
        D: ['Bedak Budak Johnson', 'Cotton Bud', 'Syampoo Budak Johnson'],
        E: ['Kopi', 'Susu Pekat', 'Susu Cair', 'Teh 3 in 1', 'Biskut Oatkrunch', 'Biskut Oreo', 'Biskut Julies', 'Cornflakes Cococrunch', 'Cornflakes Honeystar', 'Cornflakes Kellogs', 'Susu Full Cream', 'Plastik Sampah S', 'Plastik Sampah M', 'Plastik Sampah L', 'Plastik Sampah XL', 'Foil', 'Baking Paper'],
        F: ['Ubat Gigi Colgate', 'Ubat Gigi Hala Gel', 'Berus Gigi Abah/Mama', 'Berus Gigi Arissa/Rayyan', 'Berus Gigi Aqeel/Aaira', 'Palmolive Refill', 'Lux Refill', 'Shampoo Shayla Pink', 'Shampoo Shayla Biru']
    };

    let selectedItems = getCookies() || {}; // Get stored items from cookies
    let customItems = []; // Store custom items

    // Generate forms for categories
    function generateForms() {
        const container = document.getElementById('categories');
        categories.forEach(category => {
            selectedItems[category] = selectedItems[category] || [];

            const div = document.createElement('div');
            div.id = `category${category}`;
            div.classList.add('category-group');

            div.innerHTML = `
                <h3>Category ${category}</h3>
                <form id="category${category}-form">
                    ${items[category]
                        .map((item, index) => `
                            <div class="checkbox-group">
                                <input type="checkbox" id="item${category}${index}" value="${item}" ${selectedItems[category].some(i => i.item === item) ? 'checked' : ''}>
                                <label for="item${category}${index}">${item}</label>
                                <input type="number" id="quantity${category}${index}" min="1" max="25" placeholder="Qty" value="${selectedItems[category].find(i => i.item === item)?.quantity || ''}">
                            </div>
                        `)
                        .join('')}
                    <button type="submit">Save and Exitüòã</button>
                </form>
            `;
            container.appendChild(div);
        });

        // Attach event listeners to form submissions
        categories.forEach(category => {
            const form = document.getElementById(`category${category}-form`);
            form.addEventListener('submit', (event) => handleFormSubmit(event, category));
        });
    }

// Skip the current category and go back to the main menu
function skipCategory(category) {
    // Hide the current category form
    const currentCategoryDiv = document.getElementById(`category${category}`);
    currentCategoryDiv.classList.remove('show');

    // Show the main menu again
    showMainMenu();

    // Optionally, reset or clear any data (if needed)
    // selectedItems[category] = []; // Uncomment this if you want to reset the skipped category.
}

// Show the main menu
function showMainMenu() {
    // Hide all category forms
    categories.forEach(c => {
        const categoryDiv = document.getElementById(`category${c}`);
        categoryDiv.classList.remove('show');
    });

    // Show the main menu buttons
    const mainMenu = document.getElementById('main-menu');
    mainMenu.style.display = 'block';

    // Optionally, disable the category buttons if you want to prevent further navigation
    categories.forEach(category => {
        const categoryButton = document.getElementById(`category${category}-btn`);
        categoryButton.disabled = false;  // Enable all category buttons again (if needed)
    });
}

// Handle form submission
function handleFormSubmit(event, category) {
    event.preventDefault(); // Prevent default form submission

    const form = event.target;
    const formData = new FormData(form);
    const updatedItems = [];

    items[category].forEach((item, index) => {
        const checkbox = form.querySelector(`#item${category}${index}`);
        const quantity = form.querySelector(`#quantity${category}${index}`).value;

        if (checkbox.checked) {
            updatedItems.push({ item, quantity: parseInt(quantity) });
        }
    });

    selectedItems[category] = updatedItems;
    setCookies(); // Save the selected items to cookies
    showSummary(); // Update the summary after submission
    showMainMenu(); // Return to the main menu after submitting
}


    // Skip the current category and move to the next one without saving changes
    function skipCategory(category) {
        // Hide the current category form
        const currentCategoryDiv = document.getElementById(`category${category}`);
        currentCategoryDiv.classList.remove('show');

        // Unlock the next category button
        unlockNextCategory(category);

        // Show the next category
        const nextCategoryIndex = categories.indexOf(category) + 1;
        if (nextCategoryIndex < categories.length) {
            const nextCategory = categories[nextCategoryIndex];
            showCategory(nextCategory);
        }
    }

    // Show the custom item input section
    function showCustomItemSection() {
        const section = document.getElementById('custom-items-section');
        section.style.display = 'block';
    }

    // Submit custom item
    function submitCustomItem() {
        const itemName = document.getElementById('custom-item-name').value;
        const itemQuantity = document.getElementById('custom-item-quantity').value;

        if (itemName && itemQuantity && itemQuantity > 0) {
            customItems.push({ item: itemName, quantity: parseInt(itemQuantity) });
            alert('Custom item added!');
            document.getElementById('custom-item-name').value = '';
            document.getElementById('custom-item-quantity').value = '';
            showSummary();
        } else {
            alert('Please enter a valid custom item and quantity.');
        }
    }

    // Show summary of selected and custom items
    function showSummary() {
        const summaryBox = document.getElementById('summary-box');
        let summaryText = "List to Buy:\n\n";

        categories.forEach(category => {
            if (selectedItems[category].length > 0) {
                summaryText += ` ${category}:\n`;
                selectedItems[category].forEach(item => {
                    summaryText += `- ${item.item}: ${item.quantity}\n`;
                });
              
            }
        });

        if (customItems.length > 0) {
            summaryText += "\nCustom Items:\n";
            customItems.forEach(item => {
                summaryText += `- ${item.item}: ${item.quantity}\n`;
            });
        }

        summaryBox.textContent = summaryText.trim();
    }

        // Show category form

        function showCategory(category) {

            const mainMenu = document.getElementById('main-menu');

            const categoryDiv = document.getElementById(`category${category}`);



            mainMenu.classList.add('hidden');

            categoryDiv.classList.add('show');

        }
        
                // Download the summary as a text file

        function downloadSummary() {

            const summaryBox = document.getElementById('summary-box').textContent;

            const blob = new Blob([summaryBox], { type: 'text/plain' });

            const link = document.createElement('a');

            link.href = URL.createObjectURL(blob);

            link.download = 'barang-kena-beli.txt';

            link.click();

        }

    // Unlock the next category
    function unlockNextCategory(currentCategory) {
        const nextCategoryIndex = categories.indexOf(currentCategory) + 1;
        if (nextCategoryIndex < categories.length) {
            document.getElementById(`category${categories[nextCategoryIndex]}-btn`).disabled = false;
        }
    }

    // Set cookies to store selected items
    function setCookies() {
        document.cookie = `selectedItems=${JSON.stringify(selectedItems)};path=/`;
    }

    // Get selected items from cookies
    function getCookies() {
        const name = "selectedItems=";
        const decodedCookies = decodeURIComponent(document.cookie);
        const cookiesArr = decodedCookies.split(';');
        for (let i = 0; i < cookiesArr.length; i++) {
            let cookie = cookiesArr[i];
            while (cookie.charAt(0) === ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) === 0) {
                return JSON.parse(cookie.substring(name.length, cookie.length));
            }
        }
        return {};
    }

    // Clear cookies
    function clearCookies() {
        document.cookie = "selectedItems=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC";
        location.reload();
    }
    
            function sendWhatsApp() {
            const phone = prompt("Enter the phone number (without country code):");
            if (phone) {
                const countryCode = "60"; // Malaysia country code, change if needed
                const summaryBox = document.getElementById('summary-box').textContent.trim();
                if (summaryBox) {
                    const message = encodeURIComponent(summaryBox);
                    const url = `https://wa.me/${countryCode}${phone}?text=${message}`;
                    window.open(url, '_blank');
                } else {
                    alert("No summary available to send.");
                }
            }
        }

    // Initialize the form
    generateForms();
</script>
</body>
</html>
